<div>
  <div class="btn ml-3" [ngClass]="msgEnabled? 'btn-danger': 'btn-primary'" (click)="switchMsg()">
    {{msgEnabled ? 'Disable messages' : 'Enable messages'}}
  </div>

  <div *ngIf="conversations" class="container-fluid row">
    <div class="col-sm-3 list-group">
      <div *ngFor="let conversation of conversations" class="list-group-item py-1"
          [ngClass]="selectedConversation && conversation.id === selectedConversation.id? 'active':''"
          (click)="onConversation(conversation)" style="cursor: pointer;">
        <p class="my-0">
          <strong>{{conversation.users[0].username !== loggedUsername ?
            conversation.users[0].firstName : conversation.users[1].firstName + ': '}}</strong>
        </p>
        <p class="my-0">{{conversation.theLastMessage.content.slice(0, 10)}}</p>
      </div>
    </div>

    <div *ngIf="selectedConversation; else conversationNotSelected" class="col-sm-9 ">
      <div class="alert alert-light text-center rounded-0">
        <a [routerLink]="'/id/' + receiver.id">
          {{receiver.firstName + ' ' + receiver.lastName}}
        </a>
      </div>
      <div class="alert m-1" *ngFor="let message of messages"
           [ngClass]="message.sender.username === loggedUsername?
              'alert-secondary ml-5':
              'alert-primary mr-5' ">
        {{message.content}}
      </div>

      <input type="text" class="form-control" placeholder="Type something..." aria-label="Type something..."
             aria-describedby="private-msg-btn" (keydown.enter)="sendPrivateMsg()" id="#private-msg-input" [(ngModel)]="privateMsg.content">
      <div class="input-group-append">
        <span class="btn btn-primary" id="private-msg-btn" (click)="sendPrivateMsg()">Send</span>
      </div>
    </div>

    <ng-template #conversationNotSelected class="col-sm-9 alert alert-secondary">
        Please select a chat to start messaging
    </ng-template>

  </div>

</div>
