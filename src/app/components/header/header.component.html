<nav class="navbar navbar-expand-md navbar-dark bg-dark py-1" style="height: 48px">
  <a [routerLink]="'/'" class="logo ml-md-4" style="text-decoration: none">
    <span class="text-white"><b>Geek </b></span>
    <span style="color: black" class="logo-orange px-1"><b class="font-weight-bolder">hub</b></span>
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active ml-md-5">
        <div *ngIf="authService.isLogged" class="">
          <ul class="py-0 nav navbar-nav" style="">
            <li class="active">
              <form autocomplete="off" class="form-inline py-0">
                <input (input)="searchUser()" name="searchInput" class="form-control search-input my-0"
                       [(ngModel)]="searchInput"
                       type="text" placeholder="Search" aria-label="Search" style="width: 200px">
                <div class="list-group position-absolute" style="top: 45px; z-index: 10">
                  <div *ngFor="let user of users"
                       class="bg-lightyellow list-group-item list-group-item-action list-group-item-secondary app"
                       style="width: 200px">
                    <a [routerLink]="'/id/' + user.id" class="color-black">
                      {{user.firstName + ' ' + user.lastName}}
                    </a>
                  </div>
                </div>
              </form>
            </li>
          </ul>
        </div>
      </li>
    </ul>

    <div *ngIf="!authService.isLogged" class="nav navbar-nav">
      <form class="form-inline" name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>
        <div class="form-row pt-2 pt-sm-1 pt-md-0">
          <div class="form-group col-md-5 pb-1 pb-md-0">
            <input id="mailId" class="form-control" name="username" [(ngModel)]="form.username"
                   type="text" placeholder="email" aria-label="Search">
          </div>
          <div class="form-group col-md-5 pb-1 pb-md-0">
            <input id="passId" name="password" class="form-control" [(ngModel)]="form.password"
                   type="password" placeholder="password" aria-label="Search">
          </div>
          <div class="form-group col-md-2"><input class="btn btn-orange" type="submit"
                                                  value="Sign in"></div>
        </div>
      </form>
    </div>
    <div *ngIf="authService.isLogged">
      <ul class="nav navbar-nav">
        <li class="mr-2 mr-md-4">
          <div *ngIf="authService.isLogged">
            <img [matMenuTriggerFor]="menu"
                 [src]="'http://localhost:8080/images/' + authService.currentUser.profileImage"
                 class="rounded-circle float-right avatar-image cursor-pointer"
                 alt="avatar image">
          </div>
          <mat-menu class="mt-1" style="position: fixed; overflow: hidden;" #menu="matMenu">
            <button class="py-0" mat-menu-item [routerLink]="'/id/' + authService.currentUser.id">
              {{authService.currentUser.username}}
            </button>
            <mat-divider></mat-divider>
            <button class="py-0" mat-menu-item>Settings</button>
            <mat-divider></mat-divider>
            <button (click)="logOut()" class="py-0" mat-menu-item>Log Out</button>
            <mat-divider></mat-divider>
          </mat-menu>
        </li>
      </ul>
    </div>
  </div>
</nav>


<!-- Modal -->
<div *ngIf="isPopupShown" class="modal fade show" id="exampleModalCenter" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalCenterTitle" aria-hidden="true" (click)="isPopupShown = false">
  <div class="modal-dialog modal-dialog-centered" role="document" (click)="$event.stopPropagation()">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalCenterTitle">Your account is not activated!</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="isPopupShown = false">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Press "Verify email" to receive a letter with code to your email.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="isPopupShown = false">Close</button>
        <button type="button" class="btn btn-primary" autofocus (click)="navigateToVerificationPage()">Verify email
        </button>
      </div>
    </div>
  </div>
</div>
